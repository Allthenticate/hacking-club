import sqlite3 as sql


def insertUser(username, password):
    con = sql.connect("database.db")
    cur = con.cursor()
    cur.execute("SELECT username, password FROM users WHERE username = ?", (username,))
    users = cur.fetchall()
    if len(users) > 0:
        return
    cur.execute(
        "INSERT INTO users (username,password) VALUES (?,?)", (username, password)
    )
    con.commit()
    con.close()


def retrieveUsers():
    con = sql.connect("database.db")
    cur = con.cursor()
    cur.execute("SELECT username, password FROM users")
    users = cur.fetchall()
    con.close()
    return users


def searchUsers(username):
    con = sql.connect("database.db")
    cur = con.cursor()

    query = f"SELECT username FROM users WHERE username like '%{username}%'"
    print(query)
    cur.execute(query)
    users = cur.fetchall()
    con.close()
    return users


def loginUser(username, password) -> bool:
    con = sql.connect("database.db")
    cur = con.cursor()


    query = f"SELECT password FROM users WHERE username = '{username}' AND password = '{password}'"
    print(query)
    cur.execute(query)
    users = cur.fetchall()
    con.close()

    if len(users) > 0:
        return True
    else:
        return False
